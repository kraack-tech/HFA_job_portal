{% extends "./template_layout.html" %}
{% load bootstrap4 %}
{% load socialaccount %}
{% load static %}

<!-- MitID login page-->
 <!-- Reference:  https://docs.criipto.com/verify/integrations/javascript/ -->
{% block content %}
  <!-- Login button -->
  <div class="container mt-5 mb-4">
      <div class="row justify-content-center">
          <div class="col-md-6">
              <h2 class="mb-4">Login with MitID</h2>
              <button class="btn btn-primary btn-block" id="login-button-redirect">Login</button>
              <div id="result"></div>
              <br><br>
              <a href="{% url 'index' %}">Return</a>
          </div>
      </div>
  </div>

  <!-- Criipto broker object authorize script -->
  <script type="text/javascript">
    document
      .getElementById('login-button-redirect')
      .addEventListener('click', () => {
        criiptoAuth.redirect.authorize({
            redirectUri: 'http://127.0.0.1:8001/mitid_callback',
            prompt: 'login',
        });
      });
  </script>
  {% endblock %}